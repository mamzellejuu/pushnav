/*
 New BSD License <http://creativecommons.org/licenses/BSD/>
*/
(function(c,l){var i=c.History=c.History||{},b=c.jQuery;if("undefined"!==typeof i.Adapter)throw Error("History.js Adapter has already been loaded...");i.Adapter={bind:function(e,c,g){b(e).bind(c,g)},trigger:function(e,c,g){b(e).trigger(c,g)},extractEventData:function(b,c,g){return c&&c.originalEvent&&c.originalEvent[b]||g&&g[b]||l},onDomLoad:function(e){b(e)}};"undefined"!==typeof i.init&&i.init()})(window);window.JSON||(window.JSON={});
(function(){function c(b){return b<10?"0"+b:b}function l(b){f.lastIndex=0;return f.test(b)?'"'+b.replace(f,function(b){var a=k[b];return typeof a==="string"?a:"\\u"+("0000"+b.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+b+'"'}function i(b,e){var a,c,f,k,j=g,d,h=e[b];h&&(typeof h==="object"&&typeof h.toJSON==="function")&&(h=h.toJSON(b));typeof n==="function"&&(h=n.call(e,b,h));switch(typeof h){case "string":return l(h);case "number":return isFinite(h)?""+h:"null";case "boolean":case "null":return""+
h;case "object":if(!h)return"null";g=g+o;d=[];if(Object.prototype.toString.apply(h)==="[object Array]"){k=h.length;for(a=0;a<k;a=a+1)d[a]=i(a,h)||"null";f=d.length===0?"[]":g?"[\n"+g+d.join(",\n"+g)+"\n"+j+"]":"["+d.join(",")+"]";g=j;return f}if(n&&typeof n==="object"){k=n.length;for(a=0;a<k;a=a+1){c=n[a];if(typeof c==="string")(f=i(c,h))&&d.push(l(c)+(g?": ":":")+f)}}else for(c in h)if(Object.hasOwnProperty.call(h,c))(f=i(c,h))&&d.push(l(c)+(g?": ":":")+f);f=d.length===0?"{}":g?"{\n"+g+d.join(",\n"+
g)+"\n"+j+"}":"{"+d.join(",")+"}";g=j;return f}}if(typeof Date.prototype.toJSON!=="function"){Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+c(this.getUTCMonth()+1)+"-"+c(this.getUTCDate())+"T"+c(this.getUTCHours())+":"+c(this.getUTCMinutes())+":"+c(this.getUTCSeconds())+"Z":null};String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()}}var b=window.JSON,e=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,
f=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,g,o,k={"\u0008":"\\b","\t":"\\t","\n":"\\n","\u000c":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},n;if(typeof b.stringify!=="function")b.stringify=function(b,e,a){var c;o=g="";if(typeof a==="number")for(c=0;c<a;c=c+1)o=o+" ";else typeof a==="string"&&(o=a);if((n=e)&&typeof e!=="function"&&(typeof e!=="object"||typeof e.length!=="number"))throw Error("JSON.stringify");return i("",
{"":b})};if(typeof b.parse!=="function")b.parse=function(b,c){function a(b,e){var j,d,h=b[e];if(h&&typeof h==="object")for(j in h)if(Object.hasOwnProperty.call(h,j)){d=a(h,j);d!==void 0?h[j]=d:delete h[j]}return c.call(b,e,h)}var f,b=""+b;e.lastIndex=0;e.test(b)&&(b=b.replace(e,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)}));if(/^[\],:{}\s]*$/.test(b.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,
"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""))){f=eval("("+b+")");return typeof c==="function"?a({"":f},""):f}throw new SyntaxError("JSON.parse");}})();/*
 New BSD License <http://creativecommons.org/licenses/BSD/>
*/
(function(c){var l=c.document,i=c.setInterval||i,b=c.History=c.History||{};if("undefined"!==typeof b.initHtml4)throw Error("History.js HTML4 Support has already been loaded...");b.initHtml4=function(){if("undefined"!==typeof b.initHtml4.initialized)return!1;b.initHtml4.initialized=!0;b.enabled=!0;b.savedHashes=[];b.isLastHash=function(e){var c=b.getHashByIndex();return e===c};b.saveHash=function(e){if(b.isLastHash(e))return!1;b.savedHashes.push(e);return!0};b.getHashByIndex=function(e){var c=null;
return c="undefined"===typeof e?b.savedHashes[b.savedHashes.length-1]:0>e?b.savedHashes[b.savedHashes.length+e]:b.savedHashes[e]};b.discardedHashes={};b.discardedStates={};b.discardState=function(c,f,g){var i=b.getHashByState(c);b.discardedStates[i]={discardedState:c,backState:g,forwardState:f};return!0};b.discardHash=function(c,f,g){b.discardedHashes[c]={discardedHash:c,backState:g,forwardState:f};return!0};b.discardedState=function(c){c=b.getHashByState(c);return b.discardedStates[c]||!1};b.discardedHash=
function(c){return b.discardedHashes[c]||!1};b.recycleState=function(c){var f=b.getHashByState(c);b.discardedState(c)&&delete b.discardedStates[f];return!0};b.getAnchorPage=function(b){if(-1<b.indexOf("#")){var c=b.indexOf("#");return b=b.substr(c+1,b.length)}};b.emulated.hashChange&&(b.hashChangeInit=function(){b.checkerFunction=null;var e="",f,g,o;b.isInternetExplorer()?(f=l.createElement("iframe"),f.setAttribute("id","historyjs-iframe"),f.style.display="none",l.body.appendChild(f),f.contentWindow.document.open(),
f.contentWindow.document.close(),g="",o=!1,b.checkerFunction=function(){if(o)return!1;o=!0;var k=b.getHash()||"",i=b.unescapeHash(f.contentWindow.document.location.hash)||"";k!==e?(e=k,i!==k&&(g=k,f.contentWindow.document.open(),f.contentWindow.document.close(),f.contentWindow.document.location.hash=b.escapeHash(k)),b.Adapter.trigger(c,"hashchange")):i!==g&&(g=i,b.setHash(i,!1));o=!1;return!0}):b.checkerFunction=function(){var f=b.getHash();f!==e&&(e=f,b.Adapter.trigger(c,"hashchange"));return!0};
b.intervalList.push(i(b.checkerFunction,b.options.hashChangeInterval));return!0},b.Adapter.onDomLoad(b.hashChangeInit));b.emulated.pushState&&(b.onHashChange=function(e){var f=b.getHashByUrl(e&&e.newURL||l.location.href),e=null;if(b.isLastHash(f)){b.busy(false);return false}b.doubleCheckComplete();b.saveHash(f);if(f&&b.isTraditionalAnchor(f,true)){e=b.getAnchorPage(l.location.href);e=b.createStateObject(null,null,e);if(b.isLastSavedState(e)){b.busy(false);return false}b.storeState(e);b.saveState(e);
b.Adapter.trigger(c,"anchorchange");b.busy(false);return false}e=b.extractState(b.getFullUrl(f||l.location.href,false),true);if(b.isLastSavedState(e)){b.busy(false);return false}b.getHashByState(e);if(f=b.discardedState(e)){b.getHashByIndex(-2)===b.getHashByState(f.forwardState)?b.back(false):b.forward(false);return false}b.pushState(e.data,e.title,e.url,false);return true},b.Adapter.bind(c,"hashchange",b.onHashChange),b.pushState=function(e,f,g,i){if(i!==false&&b.busy()){b.pushQueue({scope:b,callback:b.pushState,
args:arguments,queue:i});return false}b.busy(true);var k=b.createStateObject(e,f,g),n=b.getHashByState(k),m=b.getState(false),m=b.getHashByState(m),q=b.getHash();b.storeState(k);b.expectedStateId=k.id;b.recycleState(k);b.setTitle(k);if(n===m){b.busy(false);return false}if(n!==q&&n!==b.getShortUrl(l.location.href)){b.setHash(n,false);return false}b.saveState(k);b.Adapter.trigger(c,"statechange");b.busy(false);return true},b.replaceState=function(c,f,g,i){if(i!==false&&b.busy()){b.pushQueue({scope:b,
callback:b.replaceState,args:arguments,queue:i});return false}b.busy(true);var k=b.createStateObject(c,f,g),l=b.getState(false),m=b.getStateByIndex(-2);b.discardState(l,k,m);b.pushState(k.data,k.title,k.url,false);return true});if(b.emulated.pushState&&b.getHash()&&!b.emulated.hashChange)b.Adapter.onDomLoad(function(){b.Adapter.trigger(c,"hashchange")})};"undefined"!==typeof b.init&&b.init()})(window);/*
 Public Domain
 @author Benjamin Arthur Lupton <contact@balupton.com>
 @author James Padolsey <https://gist.github.com/527683>
 Public Domain
 @author Benjamin Arthur Lupton <contact@balupton.com>
 New BSD License <http://creativecommons.org/licenses/BSD/>
*/
(function(c){function l(){}for(var i="assert count debug dir dirxml error exception group groupCollapsed groupEnd info log markTimeline profile profileEnd time timeEnd trace warn".split(" "),b;b=i.pop();)c[b]=c[b]||l})(function(){try{return console.log(),window.console}catch(c){return window.console={}}}());
(function(c,l){var i=c.console||l,b=c.document,e=c.navigator,f=c.sessionStorage||!1,g=c.setTimeout,o=c.clearTimeout,k=c.setInterval,n=c.clearInterval,m=c.JSON,q=c.alert,a=c.History=c.History||{},p=c.history;m.stringify=m.stringify||m.encode;m.parse=m.parse||m.decode;if("undefined"!==typeof a.init)throw Error("History.js Core has already been loaded...");a.init=function(){if("undefined"===typeof a.Adapter)return!1;"undefined"!==typeof a.initCore&&a.initCore();"undefined"!==typeof a.initHtml4&&a.initHtml4();
return!0};a.initCore=function(){if("undefined"!==typeof a.initCore.initialized)return!1;a.initCore.initialized=!0;a.options=a.options||{};a.options.hashChangeInterval=a.options.hashChangeInterval||100;a.options.safariPollInterval=a.options.safariPollInterval||500;a.options.doubleCheckInterval=a.options.doubleCheckInterval||500;a.options.storeInterval=a.options.storeInterval||1E3;a.options.busyDelay=a.options.busyDelay||250;a.options.debug=a.options.debug||!1;a.options.initialTitle=a.options.initialTitle||
b.title;a.intervalList=[];a.clearAllIntervals=function(){var j,b=a.intervalList;if("undefined"!==typeof b&&null!==b){for(j=0;j<b.length;j++)n(b[j]);a.intervalList=null}};a.debug=function(){a.options.debug&&a.log.apply(a,arguments)};a.log=function(){var a=!("undefined"===typeof i||"undefined"===typeof i.log||"undefined"===typeof i.log.apply),d=b.getElementById("log"),h,c,e,f;a?(c=Array.prototype.slice.call(arguments),h=c.shift(),"undefined"!==typeof i.debug?i.debug.apply(i,[h,c]):i.log.apply(i,[h,
c])):h="\n"+arguments[0]+"\n";c=1;for(e=arguments.length;c<e;++c){f=arguments[c];if("object"===typeof f&&"undefined"!==typeof m)try{f=m.stringify(f)}catch(g){}h+="\n"+f+"\n"}d?(d.value+=h+"\n-----\n",d.scrollTop=d.scrollHeight-d.clientHeight):a||q(h);return!0};a.getInternetExplorerMajorVersion=function(){var j=a.getInternetExplorerMajorVersion,d;if("undefined"!==typeof a.getInternetExplorerMajorVersion.cached)d=a.getInternetExplorerMajorVersion.cached;else{d=3;for(var c=b.createElement("div"),e=c.getElementsByTagName("i");(c.innerHTML=
"<\!--[if gt IE "+ ++d+"]><i></i><![endif]--\>")&&e[0];);d=4<d?d:!1}return j.cached=d};a.isInternetExplorer=function(){return a.isInternetExplorer.cached="undefined"!==typeof a.isInternetExplorer.cached?a.isInternetExplorer.cached:Boolean(a.getInternetExplorerMajorVersion())};a.emulated={pushState:!Boolean(c.history&&c.history.pushState&&c.history.replaceState&&!(/ Mobile\/([1-7][a-z]|(8([abcde]|f(1[0-8]))))/i.test(e.userAgent)||/AppleWebKit\/5([0-2]|3[0-2])/i.test(e.userAgent))),hashChange:Boolean(!("onhashchange"in
c||"onhashchange"in b)||a.isInternetExplorer()&&8>a.getInternetExplorerMajorVersion())};a.enabled=!a.emulated.pushState;a.bugs={setHash:Boolean(!a.emulated.pushState&&"Apple Computer, Inc."===e.vendor&&/AppleWebKit\/5([0-2]|3[0-3])/.test(e.userAgent)),safariPoll:Boolean(!a.emulated.pushState&&"Apple Computer, Inc."===e.vendor&&/AppleWebKit\/5([0-2]|3[0-3])/.test(e.userAgent)),ieDoubleCheck:Boolean(a.isInternetExplorer()&&8>a.getInternetExplorerMajorVersion()),hashEscape:Boolean(a.isInternetExplorer()&&
7>a.getInternetExplorerMajorVersion())};a.isEmptyObject=function(a){for(var b in a)return!1;return!0};a.cloneObject=function(a){a?(a=m.stringify(a),a=m.parse(a)):a={};return a};a.getRootUrl=function(){var a=b.location.protocol+"//"+(b.location.hostname||b.location.host);b.location.port&&(a+=":"+b.location.port);return a+"/"};a.getBaseHref=function(){var a=b.getElementsByTagName("base"),d=null,d="";1===a.length&&(d=a[0],d=d.href.replace(/[^\/]+$/,""));(d=d.replace(/\/+$/,""))&&(d+="/");return d};a.getBaseUrl=
function(){return a.getBaseHref()||a.getBasePageUrl()||a.getRootUrl()};a.getPageUrl=function(){return((a.getState(!1,!1)||{}).url||b.location.href).replace(/\/+$/,"").replace(/[^\/]+$/,function(a){return/\./.test(a)?a:a+"/"})};a.getBasePageUrl=function(){return b.location.href.replace(/[#\?].*/,"").replace(/[^\/]+$/,function(a){return/[^\/]$/.test(a)?"":a}).replace(/\/+$/,"")+"/"};a.getFullUrl=function(b,d){var c=b,e=b.substring(0,1),d="undefined"===typeof d?!0:d;/[a-z]+\:\/\//.test(b)||(c="/"===
e?a.getRootUrl()+b.replace(/^\/+/,""):"#"===e?a.getPageUrl().replace(/#.*/,"")+b:"?"===e?a.getPageUrl().replace(/[\?#].*/,"")+b:d?a.getBaseUrl()+b.replace(/^(\.\/)+/,""):a.getBasePageUrl()+b.replace(/^(\.\/)+/,""));return c.replace(/\#$/,"")};a.getShortUrl=function(b){var d=a.getBaseUrl(),c=a.getRootUrl();a.emulated.pushState&&(b=b.replace(d,""));b=b.replace(c,"/");a.isTraditionalAnchor(b);return b=b.replace(/^(\.\/)+/g,"./").replace(/\#$/,"")};a.store={};a.idToState=a.idToState||{};a.stateToId=a.stateToId||
{};a.urlToId=a.urlToId||{};a.storedStates=a.storedStates||[];a.savedStates=a.savedStates||[];a.normalizeStore=function(){a.store.idToState=a.store.idToState||{};a.store.urlToId=a.store.urlToId||{};a.store.stateToId=a.store.stateToId||{}};a.getState=function(b,d){"undefined"===typeof b&&(b=!0);"undefined"===typeof d&&(d=!0);var c=a.getLastSavedState();!c&&d&&(c=a.createStateObject());b&&(c=a.cloneObject(c),c.url=c.cleanUrl||c.url);return c};a.getIdByState=function(b){var d=a.extractId(b.url),c;if(!d)if(c=
a.getStateString(b),"undefined"!==typeof a.stateToId[c])d=a.stateToId[c];else if("undefined"!==typeof a.store.stateToId[c])d=a.store.stateToId[c];else{for(;!(d=(new Date).getTime()+(""+Math.random()).replace(/\D/g,""),"undefined"===typeof a.idToState[d]&&"undefined"===typeof a.store.idToState[d]););a.stateToId[c]=d;a.idToState[d]=b}return d};a.normalizeState=function(j){var d;if(!j||"object"!==typeof j)j={};if("undefined"!==typeof j.normalized)return j;if(!j.data||"object"!==typeof j.data)j.data=
{};d={normalized:!0};d.title=j.title||"";d.url=a.getFullUrl(a.unescapeString(j.url||b.location.href));d.hash=a.getShortUrl(d.url);d.data=a.cloneObject(j.data);i.log(j.url||b.location.href,d.url);d.id=a.getIdByState(d);d.realUrl=a.unescapeString(d.url||b.location.href);d.cleanUrl=d.url.replace(/\??\&_suid.*/,"");d.url=d.cleanUrl;j=!a.isEmptyObject(d.data);if(d.title||j)d.hash=a.getShortUrl(d.url).replace(/\??\&_suid.*/,""),/\?/.test(d.hash)||(d.hash+="?"),d.hash+="&_suid="+d.id;d.isAjax=!a.isTraditionalAnchor(d.hash);
d.isAnchor=a.isTraditionalAnchor(d.hash);d.hashedUrl=a.getFullUrl(d.hash);if((a.emulated.pushState||a.bugs.safariPoll)&&a.hasUrlDuplicate(d))d.url=d.hashedUrl;return d};a.createStateObject=function(b,d,c){b={data:b,title:d,url:c};return b=a.normalizeState(b)};a.getStateById=function(b){b=""+b;return a.idToState[b]||a.store.idToState[b]||l};a.getStateString=function(b){b={data:a.normalizeState(b).data,title:b.title,url:b.url};return m.stringify(b)};a.getStateId=function(b){return a.normalizeState(b).id};
a.getHashByState=function(b){return a.normalizeState(b).hash};a.extractId=function(a){return((a=/(.*)\&_suid=([0-9]+)$/.exec(a))?""+(a[2]||""):"")||!1};a.isTraditionalAnchor=function(a,b){return-1<a.indexOf("isAjax=true")&&b?!1:-1<a.indexOf("isAjax=false")&&b?!0:!/[\/\?\.]/.test(a)};a.extractState=function(b,d,c){var e=null,f,g,d=d||!1;(f=a.extractId(b))&&(e=a.getStateById(f));e||(g=a.getFullUrl(b),(f=a.getIdByUrl(g)||!1)&&(e=a.getStateById(f)),!e&&(d&&!a.isTraditionalAnchor(b,c))&&(e=a.createStateObject(null,
null,g)));return e};a.getIdByUrl=function(b){return a.urlToId[b]||a.store.urlToId[b]||l};a.getLastSavedState=function(){return a.savedStates[a.savedStates.length-1]||l};a.getLastStoredState=function(){return a.storedStates[a.storedStates.length-1]||l};a.hasUrlDuplicate=function(b){var d=!1;return d=(d=a.extractState(b.url))&&d.id!==b.id};a.storeState=function(b){a.urlToId[b.url]=b.id;a.storedStates.push(a.cloneObject(b));return b};a.isLastSavedState=function(b){var d=!1;a.savedStates.length&&(b=b.id,
d=a.getLastSavedState(),d=d.id,d=b===d);return d};a.saveState=function(b){if(a.isLastSavedState(b))return!1;a.savedStates.push(a.cloneObject(b));return!0};a.getStateByIndex=function(b){var d=null;return d="undefined"===typeof b?a.savedStates[a.savedStates.length-1]:0>b?a.savedStates[a.savedStates.length+b]:a.savedStates[b]};a.getHash=function(){return a.unescapeHash(b.location.hash)};a.unescapeString=function(a){for(var b;;){b=decodeURI(a);if(b===a)break;a=b}return a};a.unescapeHash=function(b){b=
a.normalizeHash(b);return b=a.unescapeString(b)};a.normalizeHash=function(a){return a.replace(/[^#]*#/,"").replace(/#.*/,"")};a.setHash=function(c,d){var h,e;if(!1!==d&&a.busy())return a.pushQueue({scope:a,callback:a.setHash,args:arguments,queue:d}),!1;h=a.escapeHash(c);a.busy(!0);(e=a.extractState(c,!0))&&!a.emulated.pushState?a.pushState(e.data,e.title,e.url,!1):b.location.hash!==h&&(a.bugs.setHash?(e=a.getPageUrl(),a.pushState(null,null,e+"#"+h,!1)):b.location.hash=h);return a};a.escapeHash=function(b){b=
a.normalizeHash(b);b=c.escape(b);a.bugs.hashEscape||(b=b.replace(/\%21/g,"!").replace(/\%26/g,"&").replace(/\%3D/g,"=").replace(/\%3F/g,"?"));return b};a.getHashByUrl=function(b){b=(""+b).replace(/([^#]*)#?([^#]*)#?(.*)/,"$2");return b=a.unescapeHash(b)};a.setTitle=function(c){var d=c.title,e;d||(e=a.getStateByIndex(0))&&e.url===c.url&&(d=e.title||a.options.initialTitle);try{b.getElementsByTagName("title")[0].innerHTML=d.replace("<","&lt;").replace(">","&gt;").replace(" & "," &amp; ")}catch(f){}b.title=
d;return a};a.queues=[];a.busy=function(b){"undefined"!==typeof b?a.busy.flag=b:"undefined"===typeof a.busy.flag&&(a.busy.flag=!1);if(!a.busy.flag){o(a.busy.timeout);var d=function(){var b,c;if(!a.busy.flag)for(b=a.queues.length-1;b>=0;--b){c=a.queues[b];if(c.length!==0){c=c.shift();a.fireQueueItem(c);a.busy.timeout=g(d,a.options.busyDelay)}}};a.busy.timeout=g(d,a.options.busyDelay)}return a.busy.flag};a.busy.flag=!1;a.fireQueueItem=function(b){return b.callback.apply(b.scope||a,b.args||[])};a.pushQueue=
function(b){a.queues[b.queue||0]=a.queues[b.queue||0]||[];a.queues[b.queue||0].push(b);return a};a.queue=function(b,c){"function"===typeof b&&(b={callback:b});"undefined"!==typeof c&&(b.queue=c);a.busy()?a.pushQueue(b):a.fireQueueItem(b);return a};a.clearQueue=function(){a.busy.flag=!1;a.queues=[];return a};a.stateChanged=!1;a.doubleChecker=!1;a.doubleCheckComplete=function(){a.stateChanged=!0;a.doubleCheckClear();return a};a.doubleCheckClear=function(){a.doubleChecker&&(o(a.doubleChecker),a.doubleChecker=
!1);return a};a.doubleCheck=function(b){a.stateChanged=!1;a.doubleCheckClear();a.bugs.ieDoubleCheck&&(a.doubleChecker=g(function(){a.doubleCheckClear();a.stateChanged||b();return!0},a.options.doubleCheckInterval));return a};a.safariStatePoll=function(){var e=a.extractState(b.location.href);if(!a.isLastSavedState(e))return e||a.createStateObject(),a.Adapter.trigger(c,"popstate"),a};a.back=function(b){if(!1!==b&&a.busy())return a.pushQueue({scope:a,callback:a.back,args:arguments,queue:b}),!1;a.busy(!0);
a.doubleCheck(function(){a.back(!1)});p.go(-1);return!0};a.forward=function(b){if(!1!==b&&a.busy())return a.pushQueue({scope:a,callback:a.forward,args:arguments,queue:b}),!1;a.busy(!0);a.doubleCheck(function(){a.forward(!1)});p.go(1);a.Adapter.trigger(c,"pushnavforward");return!0};a.go=function(b,c){var e;if(0<b)for(e=1;e<=b;++e)a.forward(c);else if(0>b)for(e=-1;e>=b;--e)a.back(c);else throw Error("History.go: History.go requires a positive or negative integer passed.");return a};if(a.emulated.pushState){var r=
function(){};a.pushState=a.pushState||r;a.replaceState=a.replaceState||r}else a.onPopState=function(e,d){var f=!1,f=!1,g;a.doubleCheckComplete();if(f=a.getHash()){g=a.extractState(f||b.location.href,!0,!0);if(a.isTraditionalAnchor(f,!0)){f=a.createStateObject(null,null,b.location.href);if(a.isLastSavedState(f))return a.busy(!1),!1;a.storeState(f);a.saveState(f);a.setTitle(f);a.Adapter.trigger(c,"anchorchange");a.busy(!1);return!1}a.replaceState(g.data,g.title,g.url,!1);return a.expectedStateId=!1}(f=
(f=a.Adapter.extractEventData("state",e,d)||!1)?a.getStateById(f):a.expectedStateId?a.getStateById(a.expectedStateId):a.extractState(b.location.href))||(f=a.createStateObject(null,null,b.location.href));a.expectedStateId=!1;if(a.isLastSavedState(f))return a.busy(!1),!1;a.storeState(f);a.saveState(f);a.setTitle(f);a.Adapter.trigger(c,"statechange");a.busy(!1);return!0},a.Adapter.bind(c,"popstate",a.onPopState),a.pushState=function(b,d,e,f){if(!1!==f&&a.busy())return a.pushQueue({scope:a,callback:a.pushState,
args:arguments,queue:f}),!1;a.busy(!0);var g=a.createStateObject(b,d,e);a.isLastSavedState(g)?a.busy(!1):(a.storeState(g),a.expectedStateId=g.id,p.pushState(g.id,g.title,g.url),a.Adapter.trigger(c,"popstate"));return!0},a.replaceState=function(b,d,e,f){if(!1!==f&&a.busy())return a.pushQueue({scope:a,callback:a.replaceState,args:arguments,queue:f}),!1;a.busy(!0);var g=a.createStateObject(b,d,e);a.isLastSavedState(g)?a.busy(!1):(a.storeState(g),a.expectedStateId=g.id,p.replaceState(g.id,g.title,g.url),
a.Adapter.trigger(c,"popstate"));return!0};if(f)try{a.store=m.parse(f.getItem("History.store"))||{}}catch(s){a.store={}}else a.store={};a.normalizeStore();a.Adapter.bind(c,"beforeunload",a.clearAllIntervals);a.Adapter.bind(c,"unload",a.clearAllIntervals);a.extractState(b.location.href,!0);f&&(a.onUnload=function(){var b,c;try{b=m.parse(f.getItem("History.store"))||{}}catch(e){b={}}b.idToState=b.idToState||{};b.urlToId=b.urlToId||{};b.stateToId=b.stateToId||{};for(c in a.idToState)a.idToState.hasOwnProperty(c)&&
(b.idToState[c]=a.idToState[c]);for(c in a.urlToId)a.urlToId.hasOwnProperty(c)&&(b.urlToId[c]=a.urlToId[c]);for(c in a.stateToId)a.stateToId.hasOwnProperty(c)&&(b.stateToId[c]=a.stateToId[c]);a.store=b;a.normalizeStore();f.setItem("History.store",m.stringify(b))},a.intervalList.push(k(a.onUnload,a.options.storeInterval)),a.Adapter.bind(c,"beforeunload",a.onUnload),a.Adapter.bind(c,"unload",a.onUnload));if(!a.emulated.pushState&&(a.bugs.safariPoll&&a.intervalList.push(k(a.safariStatePoll,a.options.safariPollInterval)),
"Apple Computer, Inc."===e.vendor||"Mozilla"===(e.appCodeName||"")))if(a.Adapter.bind(c,"hashchange",function(){a.Adapter.trigger(c,"popstate")}),a.getHash())a.Adapter.onDomLoad(function(){a.Adapter.trigger(c,"hashchange")})};a.init()})(window);
